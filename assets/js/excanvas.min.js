document.createElement("canvas").getContext||!function(){function e(){return this.context_||(this.context_=new c(this))}function t(e,t){var n=S.call(arguments,2);return function(){return e.apply(t,n.concat(S.call(arguments)))}}function n(e){var t=e.srcElement;switch(e.propertyName){case"width":t.style.width=t.attributes.width.nodeValue+"px",t.getContext().clearRect();break;case"height":t.style.height=t.attributes.height.nodeValue+"px",t.getContext().clearRect()}}function o(e){var t=e.srcElement;t.firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function i(){return[[1,0,0],[0,1,0],[0,0,1]]}function s(e,t){for(var n=i(),o=0;3>o;o++)for(var s=0;3>s;s++){for(var r=0,a=0;3>a;a++)r+=e[o][a]*t[a][s];n[o][s]=r}return n}function r(e,t){t.fillStyle=e.fillStyle,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle,t.globalAlpha=e.globalAlpha,t.arcScaleX_=e.arcScaleX_,t.arcScaleY_=e.arcScaleY_,t.lineScale_=e.lineScale_}function a(e){var t,n=1;if(e=String(e),"rgb"==e.substring(0,3)){var o=e.indexOf("(",3),i=e.indexOf(")",o+1),s=e.substring(o+1,i).split(",");t="#";for(var r=0;3>r;r++)t+=T[Number(s[r])];4==s.length&&"a"==e.substr(3,1)&&(n=s[3])}else t=e;return{color:t,alpha:n}}function l(e){switch(e){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function c(e){this.m_=i(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*x,this.globalAlpha=1,this.canvas=e;var t=e.ownerDocument.createElement("div");t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.style.overflow="hidden",t.style.position="absolute",e.appendChild(t),this.element_=t,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function u(e,t,n,o){e.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:n.x,cp2y:n.y,x:o.x,y:o.y}),e.currentX_=o.x,e.currentY_=o.y}function d(e){for(var t=0;3>t;t++)for(var n=0;2>n;n++)if(!isFinite(e[t][n])||isNaN(e[t][n]))return!1;return!0}function p(e,t,n){if(d(t)&&(e.m_=t,n)){var o=t[0][0]*t[1][1]-t[0][1]*t[1][0];e.lineScale_=w(b(o))}}function f(e){this.type_=e,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function h(){}var m=Math,g=m.round,v=m.sin,y=m.cos,b=m.abs,w=m.sqrt,x=10,_=x/2,S=Array.prototype.slice,C={init:function(e){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var n=e||document;n.createElement("canvas"),n.attachEvent("onreadystatechange",t(this.init_,this,n))}},init_:function(e){if(e.namespaces.g_vml_||e.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),e.namespaces.g_o_||e.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),!e.styleSheets.ex_canvas_){var t=e.createStyleSheet();t.owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}for(var n=e.getElementsByTagName("canvas"),o=0;o<n.length;o++)this.initElement(n[o])},initElement:function(t){if(!t.getContext){t.getContext=e,t.innerHTML="",t.attachEvent("onpropertychange",n),t.attachEvent("onresize",o);var i=t.attributes;i.width&&i.width.specified?t.style.width=i.width.nodeValue+"px":t.width=t.clientWidth,i.height&&i.height.specified?t.style.height=i.height.nodeValue+"px":t.height=t.clientHeight}return t}};C.init();for(var T=[],k=0;16>k;k++)for(var I=0;16>I;I++)T[16*k+I]=k.toString(16)+I.toString(16);var P=c.prototype;P.clearRect=function(){this.element_.innerHTML=""},P.beginPath=function(){this.currentPath_=[]},P.moveTo=function(e,t){var n=this.getCoords_(e,t);this.currentPath_.push({type:"moveTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},P.lineTo=function(e,t){var n=this.getCoords_(e,t);this.currentPath_.push({type:"lineTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},P.bezierCurveTo=function(e,t,n,o,i,s){var r=this.getCoords_(i,s),a=this.getCoords_(e,t),l=this.getCoords_(n,o);u(this,a,l,r)},P.quadraticCurveTo=function(e,t,n,o){var i=this.getCoords_(e,t),s=this.getCoords_(n,o),r={x:this.currentX_+2/3*(i.x-this.currentX_),y:this.currentY_+2/3*(i.y-this.currentY_)},a={x:r.x+(s.x-this.currentX_)/3,y:r.y+(s.y-this.currentY_)/3};u(this,r,a,s)},P.arc=function(e,t,n,o,i,s){n*=x;var r=s?"at":"wa",a=e+y(o)*n-_,l=t+v(o)*n-_,c=e+y(i)*n-_,u=t+v(i)*n-_;a!=c||s||(a+=.125);var d=this.getCoords_(e,t),p=this.getCoords_(a,l),f=this.getCoords_(c,u);this.currentPath_.push({type:r,x:d.x,y:d.y,radius:n,xStart:p.x,yStart:p.y,xEnd:f.x,yEnd:f.y})},P.rect=function(e,t,n,o){this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+o),this.lineTo(e,t+o),this.closePath()},P.strokeRect=function(e,t,n,o){var i=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+o),this.lineTo(e,t+o),this.closePath(),this.stroke(),this.currentPath_=i},P.fillRect=function(e,t,n,o){var i=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+o),this.lineTo(e,t+o),this.closePath(),this.fill(),this.currentPath_=i},P.createLinearGradient=function(e,t,n,o){var i=new f("gradient");return i.x0_=e,i.y0_=t,i.x1_=n,i.y1_=o,i},P.createRadialGradient=function(e,t,n,o,i,s){var r=new f("gradientradial");return r.x0_=e,r.y0_=t,r.r0_=n,r.x1_=o,r.y1_=i,r.r1_=s,r},P.drawImage=function(e){var t,n,o,i,s,r,a,l,c=e.runtimeStyle.width,u=e.runtimeStyle.height;e.runtimeStyle.width="auto",e.runtimeStyle.height="auto";var d=e.width,p=e.height;if(e.runtimeStyle.width=c,e.runtimeStyle.height=u,3==arguments.length)t=arguments[1],n=arguments[2],s=r=0,a=o=d,l=i=p;else if(5==arguments.length)t=arguments[1],n=arguments[2],o=arguments[3],i=arguments[4],s=r=0,a=d,l=p;else{if(9!=arguments.length)throw Error("Invalid number of arguments");s=arguments[1],r=arguments[2],a=arguments[3],l=arguments[4],t=arguments[5],n=arguments[6],o=arguments[7],i=arguments[8]}var f=this.getCoords_(t,n),h=[],v=10,y=10;if(h.push(" <g_vml_:group",' coordsize="',x*v,",",x*y,'"',' coordorigin="0,0"',' style="width:',v,"px;height:",y,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]){var b=[];b.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",g(f.x/x),",","Dy=",g(f.y/x),"");var w=f,_=this.getCoords_(t+o,n),S=this.getCoords_(t,n+i),C=this.getCoords_(t+o,n+i);w.x=m.max(w.x,_.x,S.x,C.x),w.y=m.max(w.y,_.y,S.y,C.y),h.push("padding:0 ",g(w.x/x),"px ",g(w.y/x),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",b.join(""),", sizingmethod='clip');")}else h.push("top:",g(f.y/x),"px;left:",g(f.x/x),"px;");h.push(' ">','<g_vml_:image src="',e.src,'"',' style="width:',x*o,"px;"," height:",x*i,'px;"',' cropleft="',s/d,'"',' croptop="',r/p,'"',' cropright="',(d-s-a)/d,'"',' cropbottom="',(p-r-l)/p,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",h.join(""))},P.stroke=function(e){var t=[],n=a(e?this.fillStyle:this.strokeStyle),o=n.color,i=n.alpha*this.globalAlpha,s=10,r=10;t.push("<g_vml_:shape",' filled="',!!e,'"',' style="position:absolute;width:',s,"px;height:",r,'px;"',' coordorigin="0 0" coordsize="',x*s," ",x*r,'"',' stroked="',!e,'"',' path="');for(var c={x:null,y:null},u={x:null,y:null},d=0;d<this.currentPath_.length;d++){var p,f=this.currentPath_[d];switch(f.type){case"moveTo":p=f,t.push(" m ",g(f.x),",",g(f.y));break;case"lineTo":t.push(" l ",g(f.x),",",g(f.y));break;case"close":t.push(" x "),f=null;break;case"bezierCurveTo":t.push(" c ",g(f.cp1x),",",g(f.cp1y),",",g(f.cp2x),",",g(f.cp2y),",",g(f.x),",",g(f.y));break;case"at":case"wa":t.push(" ",f.type," ",g(f.x-this.arcScaleX_*f.radius),",",g(f.y-this.arcScaleY_*f.radius)," ",g(f.x+this.arcScaleX_*f.radius),",",g(f.y+this.arcScaleY_*f.radius)," ",g(f.xStart),",",g(f.yStart)," ",g(f.xEnd),",",g(f.yEnd))}f&&((null==c.x||f.x<c.x)&&(c.x=f.x),(null==u.x||f.x>u.x)&&(u.x=f.x),(null==c.y||f.y<c.y)&&(c.y=f.y),(null==u.y||f.y>u.y)&&(u.y=f.y))}if(t.push(' ">'),e)if("object"==typeof this.fillStyle){var h=this.fillStyle,v=0,y={x:0,y:0},b=0,w=1;if("gradient"==h.type_){var _=h.x0_/this.arcScaleX_,S=h.y0_/this.arcScaleY_,C=h.x1_/this.arcScaleX_,T=h.y1_/this.arcScaleY_,k=this.getCoords_(_,S),I=this.getCoords_(C,T),P=I.x-k.x,M=I.y-k.y;v=180*Math.atan2(P,M)/Math.PI,0>v&&(v+=360),1e-6>v&&(v=0)}else{var k=this.getCoords_(h.x0_,h.y0_),A=u.x-c.x,E=u.y-c.y;y={x:(k.x-c.x)/A,y:(k.y-c.y)/E},A/=this.arcScaleX_*x,E/=this.arcScaleY_*x;var z=m.max(A,E);b=2*h.r0_/z,w=2*h.r1_/z-b}var L=h.colors_;L.sort(function(e,t){return e.offset-t.offset});for(var $=L.length,j=L[0].color,O=L[$-1].color,B=L[0].alpha*this.globalAlpha,N=L[$-1].alpha*this.globalAlpha,D=[],d=0;$>d;d++){var H=L[d];D.push(H.offset*w+b+" "+H.color)}t.push('<g_vml_:fill type="',h.type_,'"',' method="none" focus="100%"',' color="',j,'"',' color2="',O,'"',' colors="',D.join(","),'"',' opacity="',N,'"',' g_o_:opacity2="',B,'"',' angle="',v,'"',' focusposition="',y.x,",",y.y,'" />')}else t.push('<g_vml_:fill color="',o,'" opacity="',i,'" />');else{var R=this.lineScale_*this.lineWidth;1>R&&(i*=R),t.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',l(this.lineCap),'"',' weight="',R,'px"',' color="',o,'" />')}t.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",t.join(""))},P.fill=function(){this.stroke(!0)},P.closePath=function(){this.currentPath_.push({type:"close"})},P.getCoords_=function(e,t){var n=this.m_;return{x:x*(e*n[0][0]+t*n[1][0]+n[2][0])-_,y:x*(e*n[0][1]+t*n[1][1]+n[2][1])-_}},P.save=function(){var e={};r(this,e),this.aStack_.push(e),this.mStack_.push(this.m_),this.m_=s(i(),this.m_)},P.restore=function(){r(this.aStack_.pop(),this),this.m_=this.mStack_.pop()},P.translate=function(e,t){var n=[[1,0,0],[0,1,0],[e,t,1]];p(this,s(n,this.m_),!1)},P.rotate=function(e){var t=y(e),n=v(e),o=[[t,n,0],[-n,t,0],[0,0,1]];p(this,s(o,this.m_),!1)},P.scale=function(e,t){this.arcScaleX_*=e,this.arcScaleY_*=t;var n=[[e,0,0],[0,t,0],[0,0,1]];p(this,s(n,this.m_),!0)},P.transform=function(e,t,n,o,i,r){var a=[[e,t,0],[n,o,0],[i,r,1]];p(this,s(a,this.m_),!0)},P.setTransform=function(e,t,n,o,i,s){var r=[[e,t,0],[n,o,0],[i,s,1]];p(this,r,!0)},P.clip=function(){},P.arcTo=function(){},P.createPattern=function(){return new h},f.prototype.addColorStop=function(e,t){t=a(t),this.colors_.push({offset:e,color:t.color,alpha:t.alpha})},G_vmlCanvasManager=C,CanvasRenderingContext2D=c,CanvasGradient=f,CanvasPattern=h}();
//# sourceMappingURL=excanvas.min.js.map
