!function(e,t){function n(){L||(L={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType,ImageMapType:google.maps.ImageMapType},map:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}})}function o(e,n){return e!==t?e:"gmap3_"+(n?$+1:++$)}function i(e){var t,n=function(e){return parseInt(e,10)},o=google.maps.version.split(".").map(n);for(e=e.split(".").map(n),t=0;t<e.length;t++){if(!o.hasOwnProperty(t))return!1;if(o[t]<e[t])return!1}return!0}function s(t,n,o,i,s){if(n.todo.events||n.todo.onces){var r={id:i,data:n.todo.data,tag:n.todo.tag};n.todo.events&&e.each(n.todo.events,function(n,i){var a=t,l=i;e.isArray(i)&&(a=i[0],l=i[1]),google.maps.event.addListener(o,n,function(e){l.apply(a,[s?s:o,e,r])})}),n.todo.onces&&e.each(n.todo.onces,function(n,i){var a=t,l=i;e.isArray(i)&&(a=i[0],l=i[1]),google.maps.event.addListenerOnce(o,n,function(e){l.apply(a,[s?s:o,e,r])})})}}function r(){var e=[];this.empty=function(){return!e.length},this.add=function(t){e.push(t)},this.get=function(){return e.length?e[0]:!1},this.ack=function(){e.shift()}}function a(t,n,o){function i(e){var t={};return t[e]={},t}function s(){var e;for(e in o)if(!(e in a))return e}var r,a={},l=this,c={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};"string"==typeof o&&(o=i(o)),this.run=function(){for(var i,l;i=s();){if("function"==typeof t[i])return r=i,l=e.extend(!0,{},L[i]||{},o[i].options||{}),void(i in c.latLng?o[i].values?M(o[i].values,t,t[i],{todo:o[i],opts:l,session:a}):P(t,t[i],c.latLng[i],{todo:o[i],opts:l,session:a}):i in c.geoloc?A(t,t[i],{todo:o[i],opts:l,session:a}):t[i].apply(t,[{todo:o[i],opts:l,session:a}]));a[i]=null}n.apply(t,[o,a])},this.ack=function(e){a[r]=e,l.run.apply(l,[])}}function l(e){var t,n=[];for(t in e)n.push(t);return n}function c(t,n){var o={};if(t.todo)for(var i in t.todo)"options"!==i&&"values"!==i&&(o[i]=t.todo[i]);var s,r=["data","tag","id","events","onces"];for(s=0;s<r.length;s++)u(o,r[s],n,t.todo);return o.options=e.extend({},t.opts||{},n.options||{}),o}function u(e,t){for(var n=2;n<arguments.length;n++)if(t in arguments[n])return void(e[t]=arguments[n][t])}function d(){var e=[];this.get=function(t){if(e.length){var n,o,i,s,r,a=l(t);for(n=0;n<e.length;n++){for(s=e[n],r=a.length==s.keys.length,o=0;o<a.length&&r;o++)i=a[o],r=i in s.request,r&&(r="object"==typeof t[i]&&"equals"in t[i]&&"function"==typeof t[i]?t[i].equals(s.request[i]):t[i]===s.request[i]);if(r)return s.results}}},this.store=function(t,n){e.push({request:t,keys:l(t),results:n})}}function p(t,n,o,i){var s=this,r=[];L.classes.OverlayView.call(this),this.setMap(t),this.onAdd=function(){var t=this.getPanes();n.pane in t&&e(t[n.pane]).append(i),e.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(t,n){r.push(google.maps.event.addDomListener(i[0],n,function(t){e.Event(t).stopPropagation(),google.maps.event.trigger(s,n,[t]),s.draw()}))}),r.push(google.maps.event.addDomListener(i[0],"contextmenu",function(t){e.Event(t).stopPropagation(),google.maps.event.trigger(s,"rightclick",[t]),s.draw()}))},this.getPosition=function(){return o},this.draw=function(){var e=this.getProjection().fromLatLngToDivPixel(o);i.css("left",e.x+n.offset.x+"px").css("top",e.y+n.offset.y+"px")},this.onRemove=function(){for(var e=0;e<r.length;e++)google.maps.event.removeListener(r[e]);i.remove()},this.hide=function(){i.hide()},this.show=function(){i.show()},this.toggle=function(){i&&(i.is(":visible")?this.show():this.hide())},this.toggleDOM=function(){this.setMap(this.getMap()?null:t)},this.getDOMElement=function(){return i[0]}}function f(e){function t(){return this.onAdd=function(){},this.onRemove=function(){},this.draw=function(){},L.classes.OverlayView.apply(this,[])}t.prototype=L.classes.OverlayView.prototype;var n=new t;return n.setMap(e),n}function h(t,n,i){function r(e){E[e]||(delete $[e].options.map,E[e]=new L.classes.Marker($[e].options),s(t,{todo:$[e]},E[e],$[e].id))}function a(){return(v=O.getProjection())?(C=!0,P.push(google.maps.event.addListener(n,"zoom_changed",function(){p()})),P.push(google.maps.event.addListener(n,"bounds_changed",function(){p()})),void m()):void setTimeout(function(){a.apply(I,[])},25)}function l(e){"object"==typeof M[e]?("function"==typeof M[e].obj.setMap&&M[e].obj.setMap(null),"function"==typeof M[e].obj.remove&&M[e].obj.remove(),"function"==typeof M[e].shadow.remove&&M[e].obj.remove(),"function"==typeof M[e].shadow.setMap&&M[e].shadow.setMap(null),delete M[e].obj,delete M[e].shadow):E[e]&&E[e].setMap(null),delete M[e]}function c(){var e,t,n,o,i,s,r,a;return arguments[0]instanceof google.maps.LatLng?(e=arguments[0].lat(),n=arguments[0].lng(),arguments[1]instanceof google.maps.LatLng?(t=arguments[1].lat(),o=arguments[1].lng()):(t=arguments[1],o=arguments[2])):(e=arguments[0],n=arguments[1],arguments[2]instanceof google.maps.LatLng?(t=arguments[2].lat(),o=arguments[2].lng()):(t=arguments[2],o=arguments[3])),i=Math.PI*e/180,s=Math.PI*n/180,r=Math.PI*t/180,a=Math.PI*o/180,6371e3*Math.acos(Math.min(Math.cos(i)*Math.cos(r)*Math.cos(s)*Math.cos(a)+Math.cos(i)*Math.sin(s)*Math.cos(r)*Math.sin(a)+Math.sin(i)*Math.sin(r),1))}function u(){var e=c(n.getCenter(),n.getBounds().getNorthEast()),t=new google.maps.Circle({center:n.getCenter(),radius:1.25*e});return t.getBounds()}function d(){var e,t={};for(e in M)t[e]=!0;return t}function p(){clearTimeout(g),g=setTimeout(function(){m()},25)}function h(e){var t=v.fromLatLngToDivPixel(e),n=v.fromDivPixelToLatLng(new google.maps.Point(t.x+i.radius,t.y-i.radius)),o=v.fromDivPixelToLatLng(new google.maps.Point(t.x-i.radius,t.y+i.radius));return new google.maps.LatLngBounds(o,n)}function m(){if(!x&&!S&&C){var t,o,s,r,a,c,p,f,m,g,v,w=[],T={},I=n.getZoom(),P="maxZoom"in i&&I>i.maxZoom,A=d(),z=!1;for(_=!1,I>3&&(a=u(),z=a.getSouthWest().lng()<a.getNorthEast().lng()),t=0;t<$.length;t++)!$[t]||z&&!a.contains($[t].options.position)||y&&!y(j[t])||w.push(t);for(;;){for(t=0;T[t]&&t<w.length;)t++;if(t==w.length)break;if(r=[],k&&!P){v=10;do for(f=r,r=[],v--,p=f.length?a.getCenter():$[w[t]].options.position,a=h(p),o=t;o<w.length;o++)T[o]||a.contains($[w[o]].options.position)&&r.push(o);while(f.length<r.length&&r.length>1&&v)}else for(o=t;o<w.length;o++)if(!T[o]){r.push(o);break}for(c={indexes:[],ref:[]},m=g=0,s=0;s<r.length;s++)T[r[s]]=!0,c.indexes.push(w[r[s]]),c.ref.push(w[r[s]]),m+=$[w[r[s]]].options.position.lat(),g+=$[w[r[s]]].options.position.lng();m/=r.length,g/=r.length,c.latLng=new google.maps.LatLng(m,g),c.ref=c.ref.join("-"),c.ref in A?delete A[c.ref]:(1===r.length&&(M[c.ref]=!0),b(c))}e.each(A,function(e){l(e)}),S=!1}}var g,v,y,b,w,x=!1,_=!1,S=!1,C=!1,k=!0,I=this,P=[],M={},A={},z={},E=[],$=[],j=[],O=f(n,i.radius);a(),this.getById=function(e){return e in A?(r(A[e]),E[A[e]]):!1},this.rm=function(e){var t=A[e];E[t]&&E[t].setMap(null),delete E[t],E[t]=!1,delete $[t],$[t]=!1,delete j[t],j[t]=!1,delete A[e],delete z[t],_=!0},this.clearById=function(e){return e in A?(this.rm(e),!0):void 0},this.clear=function(e,t,n){var o,i,s,r,a,l=[],c=T(n);for(e?(o=$.length-1,i=-1,s=-1):(o=0,i=$.length,s=1),r=o;r!=i&&(!$[r]||c&&!c($[r].tag)||(l.push(z[r]),!t&&!e));r+=s);for(a=0;a<l.length;a++)this.rm(l[a])},this.add=function(e,t){e.id=o(e.id),this.clearById(e.id),A[e.id]=E.length,z[E.length]=e.id,E.push(null),$.push(e),j.push(t),_=!0},this.addMarker=function(e,n){n=n||{},n.id=o(n.id),this.clearById(n.id),n.options||(n.options={}),n.options.position=e.getPosition(),s(t,{todo:n},e,n.id),A[n.id]=E.length,z[E.length]=n.id,E.push(e),$.push(n),j.push(n.data||{}),_=!0},this.todo=function(e){return $[e]},this.value=function(e){return j[e]},this.marker=function(e){return e in E?(r(e),E[e]):!1},this.markerIsSet=function(e){return Boolean(E[e])},this.setMarker=function(e,t){E[e]=t},this.store=function(e,t,n){M[e.ref]={obj:t,shadow:n}},this.free=function(){for(var t=0;t<P.length;t++)google.maps.event.removeListener(P[t]);P=[],e.each(M,function(e){l(e)}),M={},e.each($,function(e){$[e]=null}),$=[],e.each(E,function(e){E[e]&&(E[e].setMap(null),delete E[e])}),E=[],e.each(j,function(e){delete j[e]}),j=[],A={},z={}},this.filter=function(e){y=e,m()},this.enable=function(e){k!=e&&(k=e,m())},this.display=function(e){b=e},this.error=function(e){w=e},this.beginUpdate=function(){x=!0},this.endUpdate=function(){x=!1,_&&m()},this.autofit=function(e){for(var t=0;t<$.length;t++)$[t]&&e.extend($[t].options.position)}}function m(e,t){this.id=function(){return e},this.filter=function(e){t.filter(e)},this.enable=function(){t.enable(!0)},this.disable=function(){t.enable(!1)},this.add=function(e,n,o){o||t.beginUpdate(),t.addMarker(e,n),o||t.endUpdate()},this.getById=function(e){return t.getById(e)},this.clearById=function(e,n){var o;return n||t.beginUpdate(),o=t.clearById(e),n||t.endUpdate(),o},this.clear=function(e,n,o,i){i||t.beginUpdate(),t.clear(e,n,o),i||t.endUpdate()}}function g(){function n(e){return{id:e.id,name:e.name,object:e.obj,tag:e.tag,data:e.data}}function i(e){"function"==typeof e.setMap&&e.setMap(null),"function"==typeof e.remove&&e.remove(),"function"==typeof e.free&&e.free(),e=null}var s={},r={};this.add=function(e,t,n,i){var a=e.todo||{},l=o(a.id);return s[t]||(s[t]=[]),l in r&&this.clearById(l),r[l]={obj:n,sub:i,name:t,id:l,tag:a.tag,data:a.data},s[t].push(l),l},this.getById=function(e,t,o){return e in r?t?r[e].sub:o?n(r[e]):r[e].obj:!1},this.get=function(e,t,o,i){var a,l,c=T(o);if(!s[e]||!s[e].length)return null;for(a=s[e].length;a;)if(a--,l=s[e][t?a:s[e].length-a-1],l&&r[l]){if(c&&!c(r[l].tag))continue;return i?n(r[l]):r[l].obj}return null},this.all=function(e,o,i){var a=[],l=T(o),c=function(e){var t,o;for(t=0;t<s[e].length;t++)if(o=s[e][t],o&&r[o]){if(l&&!l(r[o].tag))continue;a.push(i?n(r[o]):r[o].obj)}};if(e in s)c(e);else if(e===t)for(e in s)c(e);return a},this.rm=function(e,t,n){var o,i;if(!s[e])return!1;if(t)if(n)for(o=s[e].length-1;o>=0&&(i=s[e][o],!t(r[i].tag));o--);else for(o=0;o<s[e].length&&(i=s[e][o],!t(r[i].tag));o++);else o=n?s[e].length-1:0;return o in s[e]?this.clearById(s[e][o],o):!1},this.clearById=function(e,n){if(e in r){var o,a=r[e].name;for(o=0;n===t&&o<s[a].length;o++)e===s[a][o]&&(n=o);return i(r[e].obj),r[e].sub&&i(r[e].sub),delete r[e],s[a].splice(n,1),!0}return!1},this.objGetById=function(e){var t;if(s.clusterer)for(var n in s.clusterer)if((t=r[s.clusterer[n]].obj.getById(e))!==!1)return t;return!1},this.objClearById=function(e){if(s.clusterer)for(var t in s.clusterer)if(r[s.clusterer[t]].obj.clearById(e))return!0;return null},this.clear=function(e,t,n,o){var i,r,a,l=T(o);if(e&&e.length)e=C(e);else{e=[];for(i in s)e.push(i)}for(r=0;r<e.length;r++)if(a=e[r],t)this.rm(a,l,!0);else if(n)this.rm(a,l,!1);else for(;this.rm(a,l,!1););},this.objClear=function(t,n,o,i){if(s.clusterer&&(e.inArray("marker",t)>=0||!t.length))for(var a in s.clusterer)r[s.clusterer[a]].obj.clear(n,o,i)}}function v(){return j.geocoder||(j.geocoder=new google.maps.Geocoder),j.geocoder}function y(){return j.directionsService||(j.directionsService=new google.maps.DirectionsService),j.directionsService}function b(){return j.elevationService||(j.elevationService=new google.maps.ElevationService),j.elevationService}function w(){return j.maxZoomService||(j.maxZoomService=new google.maps.MaxZoomService),j.maxZoomService}function x(){return j.distanceMatrixService||(j.distanceMatrixService=new google.maps.DistanceMatrixService),j.distanceMatrixService}function _(){if(L.verbose){var e,t=[];if(window.console&&"function"==typeof console.error){for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}else{for(t="",e=0;e<arguments.length;e++)t+=arguments[e].toString()+" ";alert(t)}}}function S(e){return("number"==typeof e||"string"==typeof e)&&""!==e&&!isNaN(e)}function C(e){var n,o=[];if(e!==t)if("object"==typeof e)if("number"==typeof e.length)o=e;else for(n in e)o.push(e[n]);else o.push(e);return o}function T(n){return n?"function"==typeof n?n:(n=C(n),function(o){if(o===t)return!1;if("object"==typeof o){for(var i=0;i<o.length;i++)if(e.inArray(o[i],n)>=0)return!0;return!1}return e.inArray(o,n)>=0}):void 0}function k(t,n,o){var i=n?t:null;return t&&"string"!=typeof t?t.latLng?k(t.latLng):t instanceof google.maps.LatLng?t:S(t.lat)?new google.maps.LatLng(t.lat,t.lng):!o&&e.isArray(t)&&S(t[0])&&S(t[1])?new google.maps.LatLng(t[0],t[1]):i:i}function I(t){var n,o;return!t||t instanceof google.maps.LatLngBounds?t||null:(e.isArray(t)?2==t.length?(n=k(t[0]),o=k(t[1])):4==t.length&&(n=k([t[0],t[1]]),o=k([t[2],t[3]])):"ne"in t&&"sw"in t?(n=k(t.ne),o=k(t.sw)):"n"in t&&"e"in t&&"s"in t&&"w"in t&&(n=k([t.n,t.e]),o=k([t.s,t.w])),n&&o?new google.maps.LatLngBounds(o,n):null)}function P(e,t,n,o,i){var s=n?k(o.todo,!1,!0):!1,r=s?{latLng:s}:o.todo.address?"string"==typeof o.todo.address?{address:o.todo.address}:o.todo.address:!1,a=r?O.get(r):!1,l=this;r?(i=i||0,a?(o.latLng=a.results[0].geometry.location,o.results=a.results,o.status=a.status,t.apply(e,[o])):(r.location&&(r.location=k(r.location)),r.bounds&&(r.bounds=I(r.bounds)),v().geocode(r,function(s,a){a===google.maps.GeocoderStatus.OK?(O.store(r,{results:s,status:a}),o.latLng=s[0].geometry.location,o.results=s,o.status=a,t.apply(e,[o])):a===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&i<L.queryLimit.attempt?setTimeout(function(){P.apply(l,[e,t,n,o,i+1])},L.queryLimit.delay+Math.floor(Math.random()*L.queryLimit.random)):(_("geocode failed",a,r),o.latLng=o.results=!1,o.status=a,t.apply(e,[o]))}))):(o.latLng=k(o.todo,!1,!0),t.apply(e,[o]))}function M(t,n,o,i){function s(){do a++;while(a<t.length&&!("address"in t[a]));return a>=t.length?void o.apply(n,[i]):void P(r,function(n){delete n.todo,e.extend(t[a],n),s.apply(r,[])},!0,{todo:t[a]})}var r=this,a=-1;s()}function A(e,t,n){var o=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){o||(o=!0,n.latLng=new google.maps.LatLng(i.coords.latitude,i.coords.longitude),t.apply(e,[n]))},function(){o||(o=!0,n.latLng=!1,t.apply(e,[n]))},n.opts.getCurrentPosition):(n.latLng=!1,t.apply(e,[n]))}function z(n){function l(){!P&&(P=A.get())&&P.run()}function u(){P=null,A.ack(),l.call(M)}function d(t){if(t.todo.callback){var o=Array.prototype.slice.call(arguments,1);"function"==typeof t.todo.callback?t.todo.callback.apply(n,o):e.isArray(t.todo.callback)&&"function"==typeof t.todo.callback[1]&&t.todo.callback[1].apply(t.todo.callback[0],o)}}function f(e,t,o){o&&s(n,e,t,o),d(e,t),P.ack(t)}function v(t,o){if(o=o||{},E)o.todo&&o.todo.options&&(o.todo.options.center&&(o.todo.options.center=k(o.todo.options.center)),E.setOptions(o.todo.options));else{var i=o.opts||e.extend(!0,{},L.map,o.todo&&o.todo.options?o.todo.options:{});i.center=t||k(i.center),E=new L.classes.Map(n.get(0),i)}}function S(t,o,i){var r=[],a="values"in t.todo;return a||(t.todo.values=[{options:t.opts}]),t.todo.values.length?(v(),e.each(t.todo.values,function(a,l){var u,d,p,f,h=c(t,l);if(h.options[i])if(h.options[i][0][0]&&e.isArray(h.options[i][0][0]))for(d=0;d<h.options[i].length;d++)for(p=0;p<h.options[i][d].length;p++)h.options[i][d][p]=k(h.options[i][d][p]);else for(d=0;d<h.options[i].length;d++)h.options[i][d]=k(h.options[i][d]);h.options.map=E,f=new google.maps[o](h.options),r.push(f),u=z.add({todo:h},o.toLowerCase(),f),s(n,{todo:h},f,u)}),void f(t,a?r:r[0])):void f(t,!1)}function T(o){var i,r,a=new h(n,E,o),l={},c={},u=[],d=/^[0-9]+$/;for(r in o)d.test(r)?(u.push(1*r),c[r]=o[r],c[r].width=c[r].width||0,c[r].height=c[r].height||0):l[r]=o[r];return u.sort(function(e,t){return e>t}),i=l.calculator?function(t){var o=[];return e.each(t,function(e,t){o.push(a.value(t))}),l.calculator.apply(n,[o])}:function(e){return e.length},a.error(function(){_.apply(M,arguments)}),a.display(function(r){var d,p,f,h,m,g=i(r.indexes);if(o.force||g>1)for(d=0;d<u.length;d++)u[d]<=g&&(p=c[u[d]]);p?(m=p.offset||[-p.width/2,-p.height/2],f=e.extend({},l),f.options=e.extend({pane:"overlayLayer",content:p.content?p.content.replace("CLUSTER_COUNT",g):"",offset:{x:("x"in m?m.x:m[0])||0,y:("y"in m?m.y:m[1])||0}},l.options||{}),h=M.overlay({todo:f,opts:f.options,latLng:k(r)},!0),f.options.pane="floatShadow",f.options.content=e(document.createElement("div")).width(p.width+"px").height(p.height+"px").css({cursor:"pointer"}),shadow=M.overlay({todo:f,opts:f.options,latLng:k(r)},!0),l.data={latLng:k(r),markers:[]},e.each(r.indexes,function(e,t){l.data.markers.push(a.value(t)),a.markerIsSet(t)&&a.marker(t).setMap(null)}),s(n,{todo:l},shadow,t,{main:h,shadow:shadow}),a.store(r,h,shadow)):e.each(r.indexes,function(e,t){a.marker(t).setMap(E)})}),a}var P,M=this,A=new r,z=new g,E=null;this._plan=function(e){for(var t=0;t<e.length;t++)A.add(new a(M,u,e[t]));l()},this.map=function(e){v(e.latLng,e),s(n,e,E),f(e,E)},this.destroy=function(e){z.clear(),n.empty(),E&&(E=null),f(e,!0)},this.infowindow=function(o){var i=[],r="values"in o.todo;r||(o.latLng&&(o.opts.position=o.latLng),o.todo.values=[{options:o.opts}]),e.each(o.todo.values,function(e,a){var l,u,d=c(o,a);d.options.position=k(d.options.position?d.options.position:a.latLng),E||v(d.options.position),u=new L.classes.InfoWindow(d.options),u&&(d.open===t||d.open)&&(r?u.open(E,d.anchor?d.anchor:t):u.open(E,d.anchor?d.anchor:o.latLng?t:o.session.marker?o.session.marker:t)),i.push(u),l=z.add({todo:d},"infowindow",u),s(n,{todo:d},u,l)}),f(o,r?i:i[0])},this.circle=function(t){var o=[],i="values"in t.todo;return i||(t.opts.center=t.latLng||k(t.opts.center),t.todo.values=[{options:t.opts}]),t.todo.values.length?(e.each(t.todo.values,function(e,i){var r,a,l=c(t,i);l.options.center=k(l.options.center?l.options.center:i),E||v(l.options.center),l.options.map=E,a=new L.classes.Circle(l.options),o.push(a),r=z.add({todo:l},"circle",a),s(n,{todo:l},a,r)}),void f(t,i?o:o[0])):void f(t,!1)},this.overlay=function(t,o){var i=[],r="values"in t.todo;return r||(t.todo.values=[{latLng:t.latLng,options:t.opts}]),t.todo.values.length?(p.__initialised||(p.prototype=new L.classes.OverlayView,p.__initialised=!0),e.each(t.todo.values,function(r,a){var l,u,d=c(t,a),f=e(document.createElement("div")).css({border:"none",borderWidth:"0px",position:"absolute"});f.append(d.options.content),u=new p(E,d.options,k(d)||k(a),f),i.push(u),f=null,o||(l=z.add(t,"overlay",u),s(n,{todo:d},u,l))}),o?i[0]:void f(t,r?i:i[0])):void f(t,!1)},this.getaddress=function(e){d(e,e.results,e.status),P.ack()},this.getlatlng=function(e){d(e,e.results,e.status),P.ack()},this.getmaxzoom=function(e){w().getMaxZoomAtLatLng(e.latLng,function(t){d(e,t.status===google.maps.MaxZoomStatus.OK?t.zoom:!1,status),P.ack()})},this.getelevation=function(e){var t,n=[],o=function(t,n){d(e,n===google.maps.ElevationStatus.OK?t:!1,n),P.ack()};if(e.latLng)n.push(e.latLng);else for(n=C(e.todo.locations||[]),t=0;t<n.length;t++)n[t]=k(n[t]);if(n.length)b().getElevationForLocations({locations:n},o);else{if(e.todo.path&&e.todo.path.length)for(t=0;t<e.todo.path.length;t++)n.push(k(e.todo.path[t]));n.length?b().getElevationAlongPath({path:n,samples:e.todo.samples},o):P.ack()}},this.defaults=function(t){e.each(t.todo,function(t,n){L[t]="object"==typeof L[t]?e.extend({},L[t],n):n}),P.ack(!0)},this.rectangle=function(t){var o=[],i="values"in t.todo;return i||(t.todo.values=[{options:t.opts}]),t.todo.values.length?(e.each(t.todo.values,function(e,i){var r,a,l=c(t,i);l.options.bounds=I(l.options.bounds?l.options.bounds:i),E||v(l.options.bounds.getCenter()),l.options.map=E,a=new L.classes.Rectangle(l.options),o.push(a),r=z.add({todo:l},"rectangle",a),s(n,{todo:l},a,r)}),void f(t,i?o:o[0])):void f(t,!1)},this.polyline=function(e){S(e,"Polyline","path")},this.polygon=function(e){S(e,"Polygon","paths")},this.trafficlayer=function(e){v();var t=z.get("trafficlayer");t||(t=new L.classes.TrafficLayer,t.setMap(E),z.add(e,"trafficlayer",t)),f(e,t)},this.bicyclinglayer=function(e){v();var t=z.get("bicyclinglayer");t||(t=new L.classes.BicyclingLayer,t.setMap(E),z.add(e,"bicyclinglayer",t)),f(e,t)},this.groundoverlay=function(e){e.opts.bounds=I(e.opts.bounds),e.opts.bounds&&v(e.opts.bounds.getCenter());var t,n=new L.classes.GroundOverlay(e.opts.url,e.opts.bounds,e.opts.opts);n.setMap(E),t=z.add(e,"groundoverlay",n),f(e,n,t)},this.streetviewpanorama=function(t){t.opts.opts||(t.opts.opts={}),t.latLng?t.opts.opts.position=t.latLng:t.opts.opts.position&&(t.opts.opts.position=k(t.opts.opts.position)),t.todo.divId?t.opts.container=document.getElementById(t.todo.divId):t.opts.container&&(t.opts.container=e(t.opts.container).get(0));var n,o=new L.classes.StreetViewPanorama(t.opts.container,t.opts.opts);o&&E.setStreetView(o),n=z.add(t,"streetviewpanorama",o),f(t,o,n)},this.kmllayer=function(t){var o=[],r="values"in t.todo;return r||(t.todo.values=[{options:t.opts}]),t.todo.values.length?(e.each(t.todo.values,function(e,r){var a,l,u,d=c(t,r);E||v(),u=d.options,d.options.opts&&(u=d.options.opts,d.options.url&&(u.url=d.options.url)),u.map=E,l=i("3.10")?new L.classes.KmlLayer(u):new L.classes.KmlLayer(u.url,u),o.push(l),a=z.add({todo:d},"kmllayer",l),s(n,{todo:d},l,a)}),void f(t,r?o:o[0])):void f(t,!1)},this.panel=function(o){v();var i,s,r=0,a=0,l=e(document.createElement("div"));l.css({position:"absolute",zIndex:1e3,visibility:"hidden"}),o.opts.content&&(s=e(o.opts.content),l.append(s),n.first().prepend(l),o.opts.left!==t?r=o.opts.left:o.opts.right!==t?r=n.width()-s.width()-o.opts.right:o.opts.center&&(r=(n.width()-s.width())/2),o.opts.top!==t?a=o.opts.top:o.opts.bottom!==t?a=n.height()-s.height()-o.opts.bottom:o.opts.middle&&(a=(n.height()-s.height())/2),l.css({top:a,left:r,visibility:"visible"})),i=z.add(o,"panel",l),f(o,l,i),l=null},this.marker=function(t){var i="values"in t.todo,r=!E;if(i||(t.opts.position=t.latLng||k(t.opts.position),t.todo.values=[{options:t.opts}]),!t.todo.values.length)return void f(t,!1);if(r&&v(),t.todo.cluster&&!E.getBounds())return void google.maps.event.addListenerOnce(E,"bounds_changed",function(){M.marker.apply(M,[t])});if(t.todo.cluster){var a,l;t.todo.cluster instanceof m?(a=t.todo.cluster,l=z.getById(a.id(),!0)):(l=T(t.todo.cluster),a=new m(o(t.todo.id,!0),l),z.add(t,"clusterer",a,l)),l.beginUpdate(),e.each(t.todo.values,function(e,n){var o=c(t,n);o.options.position=k(o.options.position?o.options.position:n),o.options.map=E,r&&(E.setCenter(o.options.position),r=!1),l.add(o,n)}),l.endUpdate(),f(t,a)}else{var u=[];e.each(t.todo.values,function(e,o){var i,a,l=c(t,o);l.options.position=k(l.options.position?l.options.position:o),l.options.map=E,r&&(E.setCenter(l.options.position),r=!1),a=new L.classes.Marker(l.options),u.push(a),i=z.add({todo:l},"marker",a),s(n,{todo:l},a,i)}),f(t,i?u:u[0])}},this.getroute=function(e){e.opts.origin=k(e.opts.origin,!0),e.opts.destination=k(e.opts.destination,!0),y().route(e.opts,function(t,n){d(e,n==google.maps.DirectionsStatus.OK?t:!1,n),P.ack()})},this.directionsrenderer=function(t){t.opts.map=E;var n,o=new google.maps.DirectionsRenderer(t.opts);t.todo.divId?o.setPanel(document.getElementById(t.todo.divId)):t.todo.container&&o.setPanel(e(t.todo.container).get(0)),n=z.add(t,"directionsrenderer",o),f(t,o,n)},this.getgeoloc=function(e){f(e,e.latLng)},this.styledmaptype=function(e){v();var t=new L.classes.StyledMapType(e.todo.styles,e.opts);E.mapTypes.set(e.todo.id,t),f(e,t)},this.imagemaptype=function(e){v();var t=new L.classes.ImageMapType(e.opts);E.mapTypes.set(e.todo.id,t),f(e,t)},this.autofit=function(t){var n=new google.maps.LatLngBounds;e.each(z.all(),function(e,t){t.getPosition?n.extend(t.getPosition()):t.getBounds?(n.extend(t.getBounds().getNorthEast()),n.extend(t.getBounds().getSouthWest())):t.getPaths?t.getPaths().forEach(function(e){e.forEach(function(e){n.extend(e)})}):t.getPath?t.getPath().forEach(function(e){n.extend(e)}):t.getCenter?n.extend(t.getCenter()):t instanceof m&&(t=z.getById(t.id(),!0),t&&t.autofit(n))}),n.isEmpty()||E.getBounds()&&E.getBounds().equals(n)||("maxZoom"in t.todo&&google.maps.event.addListenerOnce(E,"bounds_changed",function(){this.getZoom()>t.todo.maxZoom&&this.setZoom(t.todo.maxZoom)}),E.fitBounds(n)),f(t,!0)},this.clear=function(t){if("string"==typeof t.todo){if(z.clearById(t.todo)||z.objClearById(t.todo))return void f(t,!0);t.todo={name:t.todo}}t.todo.id?e.each(C(t.todo.id),function(e,t){z.clearById(t)||z.objClearById(t)}):(z.clear(C(t.todo.name),t.todo.last,t.todo.first,t.todo.tag),z.objClear(C(t.todo.name),t.todo.last,t.todo.first,t.todo.tag)),f(t,!0)},this.exec=function(t){var o=this;e.each(C(t.todo.func),function(i,s){e.each(o.get(t.todo,!0,t.todo.hasOwnProperty("full")?t.todo.full:!0),function(e,t){s.call(n,t)})}),f(t,!0)},this.get=function(n,o,i){var s,r,a=o?n:n.todo;return o||(i=a.full),"string"==typeof a?(r=z.getById(a,!1,i)||z.objGetById(a),r===!1&&(s=a,a={})):s=a.name,"map"===s&&(r=E),r||(r=[],a.id?(e.each(C(a.id),function(e,t){r.push(z.getById(t,!1,i)||z.objGetById(t))}),e.isArray(a.id)||(r=r[0])):(e.each(s?C(s):[t],function(t,n){var o;a.first?(o=z.get(n,!1,a.tag,i),o&&r.push(o)):a.all?e.each(z.all(n,a.tag,i),function(e,t){r.push(t)}):(o=z.get(n,!0,a.tag,i),o&&r.push(o))}),a.all||e.isArray(s)||(r=r[0]))),r=e.isArray(r)||!a.all?r:[r],o?r:void f(n,r)},this.getdistance=function(e){var t;for(e.opts.origins=C(e.opts.origins),t=0;t<e.opts.origins.length;t++)e.opts.origins[t]=k(e.opts.origins[t],!0);for(e.opts.destinations=C(e.opts.destinations),t=0;t<e.opts.destinations.length;t++)e.opts.destinations[t]=k(e.opts.destinations[t],!0);x().getDistanceMatrix(e.opts,function(t,n){d(e,n===google.maps.DistanceMatrixStatus.OK?t:!1,n),P.ack()})},this.trigger=function(t){if("string"==typeof t.todo)google.maps.event.trigger(E,t.todo);else{var n=[E,t.todo.eventName];t.todo.var_args&&e.each(t.todo.var_args,function(e,t){n.push(t)}),google.maps.event.trigger.apply(google.maps.event,n)}d(t),P.ack()}}function E(e){var t;if(!e.hasOwnProperty("get"))return!1;for(t in e)if("get"!==t)return!1;return!e.get.hasOwnProperty("callback")}var L,$=0,j={},O=new d;e.fn.gmap3=function(){var t,o=[],i=!0,s=[];for(n(),t=0;t<arguments.length;t++)arguments[t]&&o.push(arguments[t]);return o.length||o.push("map"),e.each(this,function(){var t=e(this),n=t.data("gmap3");i=!1,n||(n=new z(t),t.data("gmap3",n)),1!==o.length||"get"!==o[0]&&!E(o[0])?n._plan(o):s.push("get"===o[0]?n.get("map",!0):n.get(o[0].get,!0,o[0].get.full))}),s.length?1===s.length?s[0]:s:this}}(jQuery);
//# sourceMappingURL=gmap3.min.js.map
